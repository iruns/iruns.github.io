import{p as Z,s as ee,b as se,d as Q,c as C,e as V,f as te,r as ae}from"./index-6bb90721.js";import{e as G,f as o,o as h,a as d,d as r,h as B,g as l,w as N,a5 as j,a4 as E,F as L,q as R,l as $,t as x,u as ne,r as k,m as z,a2 as oe,n as F,k as re,i as le,P as ce,p as ie,b as ue,_ as fe}from"./progress-0ab57a67.js";import{S as he,_ as pe}from"./PageContainer.vue_vue_type_style_index_0_lang-75afac8b.js";const de=""+new URL("persona-answers-5f4217e2.webp",import.meta.url).href,ve={class:"question-sign"},Se=r("p",{class:"instruction"},x(`Lihat pertanyaan
di bentuk ini`),-1),_e={class:"shape"},ge={class:"answers"},me=r("img",{class:"circles",src:de},null,-1),we={class:"texts"},xe=["onClick"],ye=G({__name:"PersonaStepSet",props:{historyStep:null,idxOffset:{default:0},stepState:{default:"question"},onNext:{type:Function,default:()=>{}},onSelect:null,isLast:{type:Boolean,default:!1}},setup(n){const q=n,i=o(()=>Z[q.historyStep.answerSet.question]),y=o(()=>ee([...q.historyStep.answerSet.answers]));return(u,M)=>(h(),d("div",{class:$(["step-set",n.idxOffset?n.idxOffset==1?"next-1 question-state":n.idxOffset==-1?"prev-1 answers-state":!1:"active "+n.stepState+"-state",n.isLast?"last":""])},[r("div",ve,[Se,r("div",_e,[B(he,{src:"persona-shapes.webp","x-sprites":2,"y-sprites":3,x:l(i).x,y:l(i).y},null,8,["x","y"])]),B(E,{class:"cta",onClick:n.onNext},{default:N(()=>[j(" Lanjut ")]),_:1},8,["onClick"])]),r("div",ge,[me,r("div",we,[(h(!0),d(L,null,R(l(y),(c,v)=>(h(),d("div",{key:v,class:$(["answer",v%2==0?"even":"odd"])},[r("p",{onClick:S=>n.onSelect(c)},x(c.text),9,xe)],2))),128))])])],2))}});const Ae=n=>(ie("data-v-af3743af"),n=n(),ue(),n),Pe={class:"persona-answers"},ke={class:"number current"},Be={class:"current"},qe={class:"all"},be=Ae(()=>r("p",{class:"instruction"},x(`Selesai di
Ruang Terang`),-1)),Ce=G({__name:"PersonaAnswersPage",setup(n){const i=se(),y=ne(),u=k(i.progress.personaHistory),M=o(()=>u.value.map(e=>e.answerSet)),c=o(()=>u.value.length),v=o(()=>u.value[c.value-1]||null),S=k("question"),_=o(()=>S.value=="question"&&c.value==C+1),A=o(()=>{let e=0,a=V[e];for(;c.value>a.until;)e++,a=V[e];return a}),I=o(()=>i.progress.personaScoresSum),g=k([]);for(let e=0;e<Q.length;e++){const a=Q[e].id;g.value.push({arch:a,score:I.value[a]||0,idx:e})}const m=o(()=>{const e=A.value.focusBetween;for(let s=0;s<g.value.length;s++){const t=g.value[s];t.score=I.value[t.arch]||0}const a=[...g.value];return a.sort((s,t)=>s.score==t.score?Math.random()-.5:s.score>t.score?-1:1),a.slice(0,e)}),H=o(()=>{let e=0;const a=m.value;for(let s=0;s<a.length;s++){const t=a[s];e+=t.score}return e/=a.length,a.filter(s=>s.score<e).sort((s,t)=>s.idx<t.idx?-1:1)}),w=o(()=>(m.value.length==g.value.length,te.filter(a=>!(a.question==U.value||M.value.includes(a))))),p=k([]);function D(){p.value=[...w.value],A.value.contrastMult&&(A.value.contrastMult>0?p.value.sort((s,t)=>s.contrast<t.contrast?1:-1):A.value.contrastMult<0&&p.value.sort((s,t)=>s.contrast>t.contrast?1:-1));for(let s=0;s<w.value.length;s++){const t=w.value[s];t.fitness=0;for(let f=0;f<m.value.length;f++){const P=m.value[f];t.fitness+=(t.sumScores[P.arch]||0)*-P.score}}p.value.sort((s,t)=>s.fitness>t.fitness?-1:1);const e=H.value.length>1?H.value:m.value;if(e.length>1){for(let s=0;s<w.value.length;s++){const t=w.value[s];if(t.fitness=0,e.length)for(let f=0;f<e.length;f++){const P=e[f].arch,O=t.contrasts[P];if(O)for(let b=0;b<e.length;b++){const X=e[b].arch;t.fitness+=O[X]||0}}}p.value.sort((s,t)=>s.fitness>t.fitness?-1:1)}const a=p.value[0];a&&i.addPersonaStep({answerSet:a})}const U=o(()=>u.value.length?u.value[u.value.length-1].answerSet.question:null),Y=o(()=>!_.value&&(!v.value||!!v.value.selectedScores));z(Y,(e,a)=>{e!=a&&e&&D()},{immediate:!0});function J(){S.value="answers"}function K(e){i.selectPersonaAnswer(e.scores),S.value="question"}function W(){i.selectPersona(),ae.replace({name:ce.PersonaToNextArea})}z(_,(e,a)=>{e!=a&&T()},{immediate:!0}),oe(()=>T(!0));function T(e=!1){_.value?setTimeout(()=>{y.setBGSetting({logoSize:.5,headerY:.5})},e?0:800):y.setBGSetting({})}return(e,a)=>(h(),d("div",Pe,[r("div",{class:"steps-container",style:F({top:"-"+(l(c)-1)*1.5*100+"vh"})},[(h(!0),d(L,null,R(l(i).progress.personaHistory,(s,t)=>(h(),d(L,null,[Math.abs(l(c)-(t+1))<=1?(h(),re(ye,{key:t,"history-step":s,"idx-offset":t-l(c)+1,"step-state":S.value,"on-next":J,"on-select":K,"is-last":l(_),style:F({top:t*1.5*100+"vh"})},null,8,["history-step","idx-offset","step-state","is-last","style"])):le("",!0)],64))),256))],4),r("div",{class:$(["others",{last:l(_)}])},[r("div",ke,[r("span",Be,x(Math.min(l(c),l(C))),1),r("span",qe,"/"+x(l(C)),1)]),B(pe,{"outer-class":{closing:!0}},{default:N(()=>[be,B(E,{class:"cta",onClick:W},{default:N(()=>[j(" Lanjut ")]),_:1})]),_:1})],2)]))}});const Me=fe(Ce,[["__scopeId","data-v-af3743af"]]);export{Me as default};
