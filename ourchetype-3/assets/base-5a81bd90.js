var D=Object.defineProperty;var H=(e,n,t)=>n in e?D(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var o=(e,n,t)=>(H(e,typeof n!="symbol"?n+"":n,t),t);import{i as x,j as S}from"./index-a1946f24.js";var a=(e=>(e.Ma="Ma",e.Sa="Sa",e.Ex="Ex",e.Ev="Ev",e.Re="Re",e.He="He",e.Lo="Lo",e.Cr="Cr",e.In="In",e.En="En",e.Ru="Ru",e.Ca="Ca",e))(a||{});class E{constructor(){o(this,"name",null);o(this,"email",null);o(this,"age",null);o(this,"gender",null);o(this,"domicile",null);o(this,"info_from",null)}}var y=(e=>(e[e.welcome=0]="welcome",e[e.persona_instruction=1]="persona_instruction",e[e.persona_answers=2]="persona_answers",e[e.persona_conclusion=3]="persona_conclusion",e[e.shadow_instruction=4]="shadow_instruction",e[e.shadow_answers=5]="shadow_answers",e[e.self_instruction=6]="self_instruction",e[e.self_answers=7]="self_answers",e[e.end_conclusion=8]="end_conclusion",e[e.graph_instruction=9]="graph_instruction",e))(y||{}),u=(e=>(e.persona="persona",e.shadow="shadow",e.self="self",e))(u||{});class C{constructor(){o(this,"Ca",0);o(this,"Ev",0);o(this,"In",0);o(this,"He",0);o(this,"Ex",0);o(this,"Re",0);o(this,"Lo",0);o(this,"Cr",0);o(this,"En",0);o(this,"Sa",0);o(this,"Ma",0);o(this,"Ru",0)}}class B{constructor(){o(this,"persona",a.Ev);o(this,"shadow",a.Ev);o(this,"self",a.Ev)}}class T{constructor(){o(this,"session_id");o(this,"reg_data",new E);o(this,"start_date");o(this,"start_time");o(this,"end_date");o(this,"end_time");o(this,"lastPage",null);o(this,"persona_scores",[]);o(this,"persona_scores_sum",new C);o(this,"top_archetypes",new B);o(this,"in_free_mode",!1)}}const f=[{id:a.Ma,label:"Magician",shadowLabel:"Manipulative",color:"#511737",colorLabel:"Ungu"},{id:a.Sa,label:"Sage",shadowLabel:"Judgemental",color:"#1c2355",colorLabel:"Biru Tua"},{id:a.Ex,label:"Explorer",shadowLabel:"Lost/Aimless",color:"#3b692f",colorLabel:"Hijau"},{id:a.Ev,label:"Everyman",shadowLabel:"Craves Recognition",color:"#405dad",colorLabel:"Biru"},{id:a.Re,label:"Rebel",shadowLabel:"Wicked",color:"#0f1128",colorLabel:"Hitam"},{id:a.He,label:"Hero",shadowLabel:"Arrogant",color:"#d83529",colorLabel:"Merah"},{id:a.Lo,label:"Lover",shadowLabel:"Envious",color:"#ec5ca5",colorLabel:"Pink"},{id:a.Cr,label:"Creator",shadowLabel:"Unsatisfiable",color:"#ef6e1b",colorLabel:"Oranye"},{id:a.In,label:"Innocent",shadowLabel:"Denialistic",color:"#7fcffa",colorLabel:"Biru muda"},{id:a.En,label:"Entertainer",shadowLabel:"Attention Seeking",color:"#f2d21c",colorLabel:"Kuning"},{id:a.Ru,label:"Ruler",shadowLabel:"Arbitrary",color:"#525252",colorLabel:"Abu-abu"},{id:a.Ca,label:"Caregiver",shadowLabel:"Codependent",color:"#edb2d3",colorLabel:"pink muda"}],O={};f.forEach(e=>{O[e.id]=e});const F=x("base",()=>{const e=S(new T),n=S(!1),t=f.length;e.value.top_archetypes.persona=f[Math.floor(Math.random()*t)].id,e.value.top_archetypes.self=f[Math.floor(Math.random()*t)].id,e.value.top_archetypes.shadow=f[Math.floor(Math.random()*t)].id;let m="white";function M(l){m=l}function w(l){const s=new Date,i=e.value;i.session_id=s.toISOString(),i.start_date=s.toLocaleDateString(),i.start_time=s.toLocaleTimeString(),i.reg_data=l}async function R({page:l=null,changes:s,resetPersonas:i}){const r=e.value;if(l&&(r.lastPage=l),r.in_free_mode=n.value,s){i&&(r.persona_scores.length=0,r.persona_scores_sum=new C);for(const c in s){const d=c,h=s[d];c==u.persona&&r.persona_scores.push(h);for(const b in h){const _=b,p=h[_];c==u.persona?r.persona_scores_sum[_]+=p:r.top_archetypes[d]=_}if(c==u.persona){let b=-1/0;for(const _ in r.persona_scores_sum){const p=_,v=r.persona_scores_sum[p];v>b&&(r.top_archetypes.persona=p,b=v)}}}}window.localStorage.setItem("ourchetypeState",JSON.stringify({state:e}))}async function g(){const l=new Date,s=e.value;s.end_date=l.toLocaleDateString(),s.end_time=l.toLocaleTimeString(),n.value&&(s.in_free_mode=n.value)}function k(l,s,i,r){L(!0);const c=new E;c.email="--testing--",w(c);const d=[];s&&d.push([u.persona,[s,1e3]]),i&&d.push([u.shadow,[i,1e3]]),r&&d.push([u.self,[r,1e3]])}function L(l){n.value=l}return{submitAction:R,submitRegForm:w,state:e,endRun:g,setBackgroundColor:M,backgroundColor:m,setFreeMode:L,freeMode:n,freeSkip:k}});export{u as P,E as R,f as a,F as b,y as c,O as d};
