import{d as C,f as i,a4 as V,o as c,c as d,b as a,g as S,u as t,w as B,W as L,X as A,F as b,m as M,a1 as I,t as _,e as j,r as N,j as z,U as E,n as q,k as F,h as G,p as K,a as R,T as U,_ as W}from"./base-c6bf4b0c.js";import{r as h}from"./index-dac72a0a.js";import{S as X,_ as Y}from"./PageContainer.vue_vue_type_style_index_0_lang-180c9541.js";import{a as J}from"./personaAnswerSets-ac915f33.js";import"./images-5702e0d1.js";import"./archetype-82cba3d4.js";var u=(e=>(e[e.Biasanya=0]="Biasanya",e[e.Penting=1]="Penting",e[e.Menyenangkan=2]="Menyenangkan",e[e.Krisis=3]="Krisis",e[e.TidakDitolerir=4]="TidakDitolerir",e))(u||{});const T=[{type:u.Biasanya,x:0,y:0},{type:u.Penting,x:1,y:0},{type:u.Menyenangkan,x:0,y:1},{type:u.Krisis,x:1,y:1},{type:u.TidakDitolerir,x:0,y:2}],$={};T.forEach(e=>$[e.type]=e);const Z=[{until:5,focusBetween:12,target:0,idx:0},{until:8,focusBetween:6,target:10,idx:1},{until:1/0,focusBetween:3,target:40,idx:2}],k=10,Q=""+new URL("persona-answers-5f4217e2.webp",import.meta.url).href,ee={class:"question-sign"},se=a("p",{class:"instruction"},_(`Lihat pertanyaan
di bentuk ini`),-1),te={class:"shape"},ae={class:"answers"},ne=a("img",{class:"circles",src:Q},null,-1),re={class:"texts"},oe=["onClick"],ie=C({__name:"PersonaStepSet",props:{historyStep:null,idxOffset:{default:0},state:{default:"question"},onNext:{type:Function,default:()=>{}},onSelect:null,isLast:{type:Boolean,default:!1}},setup(e){const l=e,p=i(()=>$[l.historyStep.answerSet.question]);console.log(l.historyStep);const r=i(()=>V([...l.historyStep.answerSet.answers]));return(s,y)=>(c(),d("div",{class:I(["step-set",e.idxOffset?e.idxOffset==1?"next-1 question-state":e.idxOffset==-1?"prev-1 answers-state":!1:"active "+e.state+"-state",e.isLast?"last":""])},[a("div",ee,[se,a("div",te,[S(X,{src:"persona-shapes.webp","x-sprites":2,"y-sprites":3,x:t(p).x,y:t(p).y},null,8,["x","y"])]),S(A,{class:"cta",onClick:e.onNext},{default:B(()=>[L(" Lanjut ")]),_:1},8,["onClick"])]),a("div",ae,[ne,a("div",re,[(c(!0),d(b,null,M(t(r),(g,m)=>(c(),d("div",{key:m,class:I(["answer",m%2==0?"even":"odd"])},[a("p",{onClick:v=>e.onSelect(g)},_(g.text),9,oe)],2))),128))])])],2))}});const ce=e=>(K("data-v-0750ddba"),e=e(),R(),e),le={class:"persona-answers"},ue={class:"number current"},de={class:"number all"},pe=ce(()=>a("p",{class:"instruction"},_(`Selesai di
Ruang Terang`),-1)),fe=C({__name:"PersonaAnswersPage",props:{stepIdx:{default:"0"},state:{default:"question"}},setup(e){const l=e,p=1.5,r=i(()=>Number.parseInt(l.stepIdx)),s=j(),y=N(s.progress.personaHistory),g=i(()=>y.value.map(n=>n.answerSet)),m=y.value[y.value.length-1].answerSet.question,v=i(()=>J.filter(n=>!(n.question==m||g.value.includes(n))));function H(){s.addPersonaStep({answerSet:v.value[Math.floor(Math.random()*v.value.length)]})}N(Z[0]),i(()=>s.progress?s.progress.personaScoresSum:null);const w=i(()=>r.value==k+1);function D(){h.push("/area-1/answers/"+r.value+"/answers")}function O(n){s.selectPersonaAnswer(n.scores),h.push("/area-1/answers/"+(r.value+1)+"/question")}function P(){h.push("/area-1/to-next-area")}return z(h.currentRoute,()=>{U(()=>{const n=r.value,f=s.progress.personaHistory.length;if(n>f){const x=s.progress.personaHistory[f-1],o=!x||!!x.selectedScores;o&&H(),h.replace({name:"area-1-answers",params:{stepIdx:f+(o?1:0),state:"question"}})}else n<f&&(s.progress.personaHistory.length=n);l.state=="question"&&w.value?setTimeout(()=>{s.setBGSetting({logoSize:.5,headerY:.5})},500):s.setBGSetting({})})},{immediate:!0}),E(()=>s.setBGSetting({})),(n,f)=>(c(),d("div",le,[a("div",{class:"steps-container",style:q({top:"-"+(t(r)-1)*p*100+"vh"})},[(c(!0),d(b,null,M(t(s).progress.personaHistory,(x,o)=>(c(),d(b,null,[Math.abs(t(r)-(o+1))<=1?(c(),F(ie,{key:o,"history-step":x,"idx-offset":o-t(r)+1,state:e.state,"on-next":D,"on-select":O,"is-last":t(w),style:q({top:o*p*100+"vh"})},null,8,["history-step","idx-offset","state","is-last","style"])):G("",!0)],64))),256))],4),a("div",{class:I(["others",{last:t(w)}])},[a("div",ue,_(Math.min(t(r),t(k))),1),a("div",de,"/"+_(t(k)),1),S(Y,{"outer-class":{closing:!0}},{default:B(()=>[pe,S(A,{class:"cta",onClick:P},{default:B(()=>[L(" Lanjut ")]),_:1})]),_:1})],2)]))}});const Se=W(fe,[["__scopeId","data-v-0750ddba"]]);export{Se as default};
